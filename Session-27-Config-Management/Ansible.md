# Ansible Configuration Management Tool

- Easy and Simple 
- Agent Less (uses ssh not installing any agent on managed node)

- It Works in Controlled and Managed node
- Control Node: Here ansible is installed and we can run playbooks
- Managed Nodes: Like Aws instances where my playbook is executed

## Push Based Model

- Ansible uses PUSH based Automation Model
- control Node (Ansible Server)
    - initiates the connection
    - pushes configuration, commands and playbooks
    - executes task on managed nodes
- Managed nodes do not run any agent.

**Work Flow**

Ansible Control Node
    |
    |
    |
    SSH Connect
    |
    |
    |
Managed Node (Linux/Ubuntu/Windows)

## Install Ansible

- Open WSL
```bash
sudo apt update  && sudo apt install ansible -y
ansible --version

# Mac Users
brew install ansible 
ansible --version
```

## Inventory

- It is a file which tells ansible to manage machines like how to connect with them.
- It is having list of hosts details like ip, username, key to connect.
- when we run playbook it will take server name from inventory and run the entire script in your server.

**How to Create?**

- 3 ways
1. INI: traditional format (simple)
2. YAML: more structured formar (morden)
3. Dynamic: it is generated by script

- inventory.yml

```yml
all:
  childrens:
    webservers:
        hosts:
            server1:
                ansible_host: 
                ansible_user: 
                ansible_ssh_private_key_file: 
            server1:
                ansible_host: 
                ansible_user: 
                ansible_ssh_private_key_file:
    databases:
        db1:
            hosts:
        db2:
            hosts:
```

## How to add key file at .ssh location

```bash
# create directory .ssh location
mkdir -p ~/.ssh
# move your key file at this location
mv /mnt/c/Users/NEW/Downloads/ansiblekey.pem ~/.ssh
# set permission
chmod 400 ~/.ssh/ansiblekey.pem
# once this is done we use this location to access key from anywhere
```

- ~/.ssh is a secure default place for SSH keys and settings, so SSH knows where to find your keys and permissions. 